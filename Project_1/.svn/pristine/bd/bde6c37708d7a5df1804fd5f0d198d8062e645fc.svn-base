function getNameOnly(n){return n.replace(/.[^.]+$/,"")}function getExtentionOnly(n){return n.split(".").pop()}function getParameterByName(n,o){o||(o=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),e=t.exec(o);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}function bytesToSize(n){var o=["Bytes","KB","MB","GB","TB"];if(0==n)return"0 Byte";var t=parseInt(Math.floor(Math.log(n)/Math.log(1024)));return Math.round(n/Math.pow(1024,t),2)+" "+o[t]}function isMacintosh(){return navigator.platform.indexOf("Mac")>-1}function isInIframe(){try{return window.self!==window.top}catch(n){return!0}}var uploadManager={options:{$el:null,onSuccess:null,onAdd:function(n,o){},onError:null,$progressbar:null,$numbPercent:null,xhr:null,$btnCancel:null,$txtFile:null},init:function(n){var o=this;o.options=$.extend(o.options,n);var t=null;null!=o.options.$progressbar&&(t=o.options.$progressbar.find("div")),o.options.$el.fileupload({url:"https://storage.dekiru.vn/FileManagerServices.ashx?fn=upload",autoUpload:!1,add:function(n,t){o.options.onAdd(n,t)||(null!=o.options.$progressbar&&o.options.$progressbar.show(),o.options.$btnCancel&&o.options.$btnCancel.show(),$.ajax({dataType:"json",method:"GET",data:{filename:t.files[0].name},url:"/chat/get-file-token",success:function(n){t.formData=n,t.process().done(function(){o.options.xhr=t.submit(),o.options.$btnCancel&&o.options.$btnCancel.click(function(){t.abort(),$(this).hide(),o.options.$numbPercent&&o.options.$numbPercent.hide(),o.options.$txtFile&&o.options.$txtFile.html("")})})},error:function(n){console.log(n.error)}}))},progress:function(n,e){var r=parseInt(e.loaded/e.total*100,10);null!=t&&t.css("width",r+"%"),o.options.$numbPercent&&r>20&&(o.options.$numbPercent.html(r+"%"),o.options.$numbPercent.show())},success:function(n,e){null!=o.options.$progressbar&&(t.css("width","100%"),setTimeout(function(){o.options.$progressbar.hide(),o.options.$progressbar.find("div").css("width","0%")},1e3)),o.options.$btnCancel&&o.options.$btnCancel.hide(),"function"==typeof o.options.onSuccess&&o.options.onSuccess(n,e)},error:function(n){o.options.$progressbar&&(o.options.$progressbar.hide(),o.options.$progressbar.find("div").css("width","0%")),"function"==typeof o.options.onError&&o.options.onError(n)}})}};!function(n){n.extend({playSound:function(){new Audio(arguments[0]).play()},stopSound:function(){}})}(jQuery);